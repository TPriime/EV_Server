{"version":3,"sources":["../../src/controllers/voterController.js"],"names":["config","db","api","get","req","res","cid","params","User","findOne","cardID","__v","user","status","json","message","console","log","_id","Vote","voter","error"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;;;;;;;kBAGe,gBAAmB;AAAA,MAAhBA,MAAgB,QAAhBA,MAAgB;AAAA,MAARC,EAAQ,QAARA,EAAQ;;AAChC,MAAIC,MAAM,sBAAV;;AAEA;AACAA,MAAIC,GAAJ,CAAQ,OAAR;AAAA,wEAAiB,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACTC,iBADS,GACHF,IAAIG,MAAJ,CAAWD,GADR;AAAA;AAAA;AAAA,qBAGIE,oBAAKC,OAAL,CAAa,EAACC,QAAQJ,GAAT,EAAb,EAA2B,EAACK,KAAK,CAAN,EAA3B,CAHJ;;AAAA;AAGTC,kBAHS;;AAAA,kBAKRA,IALQ;AAAA;AAAA;AAAA;;AAAA,+CAMJP,IAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAACC,SAAS,eAAV,EAArB,CANI;;AAAA;AAQbC,sBAAQC,GAAR,CAAYL,KAAKM,GAAjB;;AARa;AAAA,qBAUKC,sBAAKV,OAAL,CAAa,EAACW,OAAOR,KAAKM,GAAb,EAAb,EAA+B,EAACP,KAAK,CAAN,EAA/B,CAVL;;AAAA;AAUTS,mBAVS;;;AAYb,kBAAIA,KAAJ,EAAW;AACTf,oBAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAArB;AACD,eAFD,MAEK;AACHT,oBAAIS,IAAJ,CAASF,IAAT;AACD;;AAhBY;AAAA;;AAAA;AAAA;AAAA;;AAmBbP,kBAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAACO,OAAO,yBAAR,EAArB;;AAnBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB;;AAAA;AAAA;AAAA;AAAA;;AAuBA,SAAOnB,GAAP;AACD,C","file":"voterController.js","sourcesContent":["import { Router } from 'express';\nimport User from '../models/userModel';\nimport Vote from '../models/votingModel';\n\n\nexport default ({ config, db}) => {\n  let api = Router();\n\n  // '/evoting_api/v1/voter/cid'\n  api.get('/:cid', async (req, res)=> {\n    const cid = req.params.cid;\n    try {\n      let user = await User.findOne({cardID: cid},{__v: 0});\n\n      if (!user) {\n        return res.status(404).json({message: \"No user found\"});\n      }\n      console.log(user._id);\n\n      let voter = await Vote.findOne({voter: user._id},{__v: 0});\n\n      if (voter) {\n        res.status(404).json({});\n      }else{\n        res.json(user);\n      }\n\n    } catch (error) {\n      res.status(422).json({error: \"error at voter deatails\"});\n    }\n  });\n\n  return api;\n}"]}