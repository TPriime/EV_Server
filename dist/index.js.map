{"version":3,"sources":["../src/index.js"],"names":["app","server","http","createServer","port","process","env","PORT","bodyLimit","use","express","json","limit","bodyParser","urlencoded","extended","createParentPath","req","res","next","header","routes","listen","console","log","address","device_handler","start_server"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEU;;;;;;AAEV,IAAIA,MAAM,wBAAV;;AAFA;AAGA,IAAIC,SAASC,eAAKC,YAAL,CAAkBH,GAAlB,CAAb;AACA,IAAII,OAAOC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAA/B;AACA,IAAIC,YAAY,QAAhB;;AAEA;AACAR,IAAIS,GAAJ,CAAQC,kBAAQC,IAAR,CAAa;AACjBC,WAAOJ;AADU,CAAb,CAAR;;AAIA;AACAR,IAAIS,GAAJ,CAAQI,qBAAWC,UAAX,CAAsB,EAAEC,UAAU,KAAZ,EAAtB,CAAR;;AAEA;AACAf,IAAIS,GAAJ,CAAQI,qBAAWF,IAAX,EAAR;;AAEAX,IAAIS,GAAJ,CAAQ,iCAAW;AACfO,sBAAkB;AADH,CAAX,CAAR;AAGAhB,IAAIS,GAAJ,CAAQ,UAASQ,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC7BD,QAAIE,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAF,QAAIE,MAAJ,CAAW,kCAAX,EAA+C,MAA/C;AACAF,QAAIE,MAAJ,CAAW,8BAAX,EAA2C,gEAA3C;AACAF,QAAIE,MAAJ,CAAW,8BAAX,EAA2C,wCAA3C;AACAD;AACH,CAND;;AAQA;AACAnB,IAAIS,GAAJ,CAAQ,iBAAR,EAA2BY,gBAA3B;;AAEA;AACApB,OAAOqB,MAAP,CAAclB,IAAd,EAAoB;AAAA,WAChBmB,QAAQC,GAAR,6BAAsCvB,OAAOwB,OAAP,GAAiBrB,IAAvD,CADgB;AAAA,CAApB;;AAGAsB,wBAAeC,YAAf,CAA4B1B,MAA5B,EAAoCG,IAApC;AACA;;kBAEeJ,G","file":"index.js","sourcesContent":["import http from 'http';\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport fileUpload from 'express-fileupload';\nimport routes from './routes';\n\n/*@prime*/import device_handler from './handlers/device-handler';\n\nlet app = express();\nlet server = http.createServer(app);\nlet port = process.env.PORT || 8000;\nlet bodyLimit = '1000kb';\n\n// defaults\napp.use(express.json({\n    limit: bodyLimit\n}));\n\n// parse application/x-www-form-urlencoded\napp.use(bodyParser.urlencoded({ extended: false }))\n\n// parse application/json\napp.use(bodyParser.json())\n\napp.use(fileUpload({\n    createParentPath: true\n}));\napp.use(function(req, res, next) {\n    res.header(\"Access-Control-Allow-Origin\", \"*\",);\n    res.header(\"Access-Control-Allow-Credentials\", \"true\");\n    res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept, x-access-token\");\n    res.header(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS, PATCH\");\n    next();\n});\n\n// api routes v1\napp.use('/evoting_api/v1', routes);\n\n/*@prime*/\nserver.listen(port, ()=>\n    console.log(`server running on port ${server.address().port}`));\n\ndevice_handler.start_server(server, port);\n/*@prime*/\n\nexport default app;"]}